<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ú–§–¶ ‚Äî –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</title>

  <!-- Telegram WebApp API -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <style>
    :root {
      --primary-color: #800000;
      --secondary-color: #660000;
      --info-color: #990000;
      --error-color: #B22222;
      --background-color: #F5E6E6;
      --white: #fff;
      --text-color: #333;
      --shadow: 0 4px 12px rgba(128, 0, 0, 0.3);
      --input-bg: #EADADA;
      --input-border: #990000;
      --table-header-bg: linear-gradient(90deg, #800000, #660000);
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: 'Segoe UI', Arial, sans-serif; background: var(--background-color); padding: 20px; display: flex; justify-content: center; min-height: 100vh; }
    .container { max-width: 500px; width: 100%; background: var(--white); padding: 30px; border-radius: 16px; box-shadow: var(--shadow); text-align: center; }
    .step { display: none; text-align: left; }
    .step.active { display: block; }
    h2, h3 { margin-bottom: 20px; font-weight: 700; font-size: 1.6em; color: var(--primary-color); display: flex; align-items: center; gap: 10px; line-height: 1.3; }
    .input-group { margin-bottom: 20px; text-align: left; display: flex; flex-direction: column; align-items: stretch; }
    input { width: 100%; padding: 12px 15px; margin-top: 8px; border: 2px solid var(--input-border); border-radius: 10px; font-size: 16px; background: var(--input-bg); box-shadow: 0 2px 6px rgba(0,0,0,0.1); transition: border-color 0.3s, box-shadow 0.3s; }
    input:focus { outline: none; border-color: var(--primary-color); box-shadow: 0 4px 12px rgba(128,0,0,0.2); }
    .error { color: var(--error-color); font-size: 14px; margin-top: 6px; font-weight: 600; text-align: left; }
    .success { color: #28a745; font-size: 16px; margin-top: 10px; font-weight: 600; text-align: center; display: none; }
    .buttons { margin-top: 20px; display: flex; flex-direction: column; gap: 12px; }
    button, a.button { width: 100%; padding: 14px; border: none; border-radius: 10px; cursor: pointer; font-size: 16px; font-weight: 600; transition: background-color 0.3s, transform 0.1s; text-decoration: none; display: inline-block; text-align: center; color: var(--white); }
    button:hover, a.button:hover { transform: translateY(-2px); }
    button:disabled { background: #ccc; cursor: not-allowed; }
    .next { background: var(--primary-color); }
    .back { background: var(--secondary-color); }
    .menu-btn, .service-btn, .faq-btn { background: var(--info-color); }
    .data-table { margin-top: 20px; width: 100%; border-collapse: collapse; display: none; background: var(--white); border-radius: 10px; overflow: hidden; }
    .data-table.active { display: table; }
    .data-table th, .data-table td { border: 1px solid var(--input-border); padding: 15px; text-align: left; font-size: 14px; vertical-align: middle; }
    .data-table th { background: var(--table-header-bg); color: var(--white); font-weight: 700; text-transform: uppercase; }
    .data-table tr { transition: background-color 0.3s; }
    .data-table tr:hover { background-color: #F9F5F5; }
    .data-table tr:nth-child(even) { background-color: #F5EDED; }
    p { margin-bottom: 20px; color: var(--text-color); font-size: 16px; line-height: 1.5; }
    @media (max-width: 400px) {
      .container { padding: 20px; }
      h2, h3 { font-size: 1.4em; }
      input { font-size: 14px; padding: 10px 12px; }
      button, a.button { font-size: 14px; padding: 12px; }
      .data-table th, .data-table td { padding: 10px; font-size: 12px; }
    }
  </style>
</head>
<body>
  <div class="container">
    <div id="wizard">
      <!-- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é -->
      <div class="step active" id="step-main">
        <img src="https://centergoroda.com/upload/iblock/3fa/ba9xciv1erty46hhuhgdsrr92mr7yz3l/image_2021_09_07T12_44_55_842Z.png" alt="Welcome Photo" style="width: 100%; border-radius: 10px; margin-bottom: 20px;">
        <h2 id="welcome-message">üìã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, üëã</h2>
        <p>–ú—ã ‚Äî –≤–∞—à –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –¥–ª—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –º–µ—Å—Ç—É –∂–∏—Ç–µ–ª—å—Å—Ç–≤–∞. –ì–æ—Ç–æ–≤—ã –Ω–∞—á–∞—Ç—å –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ?</p>
        <div class="buttons">
          <a href="https://t.me/MFC_Bot?start=welcome" target="_blank" class="button">–û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Telegram</a>
          <button class="menu-btn" data-action="schedule">üìã –ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –ø—Ä–∏—ë–º</button>
          <button class="menu-btn" data-action="documents">üìú –°–ø–∏—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</button>
          <button class="menu-btn" data-action="check-status">üîç –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏</button>
          <button class="menu-btn" data-action="contact">üìû –°–≤—è–∑–∞—Ç—å—Å—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π</button>
          <button class="menu-btn" data-action="faq">‚ùì –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã</button>
        </div>
      </div>

      <!-- –æ—Å—Ç–∞–ª—å–Ω—ã–µ —à–∞–≥–∏ (fullname, phone, address, document-type, document-number, code, documents, check-status, status-number, status-passport, contact, faq, faq-answer, data-output) –æ—Å—Ç–∞—é—Ç—Å—è —Ç–∞–∫–∏–º–∏ –∂–µ, –∫–∞–∫ —è –ø—Ä–∏—Å—ã–ª–∞–ª –≤—ã—à–µ -->
    </div>
  </div>

  <script>
    class MFCWizard {
      constructor() {
        this.steps = document.querySelectorAll('.step');
        this.currentStep = 'main';
        this.formData = {};
        this.dataStore = [];
        this.initEventListeners();
        this.updateWelcomeMessage();
        this.showStep('main');
      }

      initEventListeners() {
        const root = document.getElementById('wizard');
        if (!root) return;

        root.addEventListener('click', (e) => {
          const t = e.target;
          if (t.classList.contains('next') && !t.closest('a') && !t.closest('.redirect-button')) this.handleNext();
          else if (t.classList.contains('back')) this.handleBack();
          else if (t.classList.contains('menu-btn')) this.handleMenuAction(t.dataset.action, t.dataset.doc);
          else if (t.classList.contains('service-btn')) this.handleServiceAction(t.dataset.service);
          else if (t.classList.contains('faq-btn')) this.handleFaqAction(t.dataset.faq);
        });
      }

      updateWelcomeMessage() {
        const el = document.getElementById('welcome-message');
        let name = '–ì–æ—Å—Ç—å';

        const tg = window.Telegram && window.Telegram.WebApp;
        if (tg) {
          try {
            tg.ready();
            const u = tg.initDataUnsafe && tg.initDataUnsafe.user;
            if (u) {
              const full = [u.first_name, u.last_name].filter(Boolean).join(' ');
              name = full || (u.username ? '@' + u.username : '–ì–æ—Å—Ç—å';
            }
          } catch {}
        } else {
          const params = new URLSearchParams(location.search);
          name = params.get('username') || '–ì–æ—Å—Ç—å';
        }

        if (el) el.textContent = `üìã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ${name}! üëã`;
      }

      showStep(id) {
        this.steps.forEach(s => s.classList.toggle('active', s.id === `step-${id}`));
        this.currentStep = id;
        window.scrollTo({ top: 0, behavior: 'smooth' });
      }

      // handleNext, handleBack, handleMenuAction –∏ –¥—Ä—É–≥–∏–µ –º–µ—Ç–æ–¥—ã –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
    }

    const wizard = new MFCWizard();
  </script>
</body>
</html>
